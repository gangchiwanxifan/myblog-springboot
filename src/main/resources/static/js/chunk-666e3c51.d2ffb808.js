(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-666e3c51"],{"169e":function(e,a,t){"use strict";t("30d9")},"30d9":function(e,a,t){},"79ef":function(e,a,t){},"9c53":function(e,a,t){"use strict";t("79ef")},af20:function(e,a,t){"use strict";var n=function(){var e=this,a=e.$createElement,t=e._self._c||a;return t("div",[t("div",{staticClass:"page-header-wrap"},[t("div",{staticClass:"header-content"},[t("div",[t("a-breadcrumb",[t("a-breadcrumb-item",[e._v("主页")]),t("a-breadcrumb-item",[e._v(e._s(e.management))])],1)],1),t("div",{staticClass:"header-heading"},[t("span",{staticClass:"header-heading-title"},[e._v(e._s(e.management))])]),e._t("default")],2)])])},i=[],r={props:{management:String}},s=r,d=(t("169e"),t("2877")),o=Object(d["a"])(s,n,i,!1,null,"6c3573fa",null);a["a"]=o.exports},ee03:function(e,a,t){"use strict";t.r(a);var n=function(){var e=this,a=e.$createElement,t=e._self._c||a;return t("div",[t("page-header",{attrs:{management:e.management}}),t("a-card",{staticClass:"ant-card-body"},[t("a-button",{staticClass:"add-btn",attrs:{type:"primary"},on:{click:e.showAddModal}},[t("a-icon",{attrs:{type:"plus"}}),e._v("新建 ")],1),t("a-table",{attrs:{columns:e.columns,"data-source":e.data,rowKey:"channelId",loading:e.loading,pagination:{defaultPageSize:6}},scopedSlots:e._u([{key:"avatar",fn:function(e){return t("div",{},[t("img",{staticStyle:{height:"60px"},attrs:{src:e,alt:"图片没了"}})])}},{key:"action",fn:function(a){return t("span",{},[t("a",{on:{click:function(t){return e.showEditModal(a)}}},[e._v("修改")]),t("a-divider",{attrs:{type:"vertical"}}),t("a",{on:{click:function(t){return e.showDeleteConfirm(a)}}},[e._v("删除")])],1)}}])})],1),t("a-modal",{attrs:{title:"新建栏目",visible:e.visible_add,"confirm-loading":e.confirmLoading_add},on:{ok:e.handleAddOk,cancel:e.handleAddCancel}},[t("a-form",{attrs:{form:e.add_form,labelCol:{span:4},wrapperCol:{span:16}}},[t("a-form-item",{attrs:{label:"栏目名称:"}},[t("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["channelName",{rules:[{required:!0,message:"请输入名称"}],validateTrigger:["change","blur"]}],expression:"[\n            'channelName',\n            {\n              rules: [{ required: true, message: '请输入名称' }],\n              validateTrigger: ['change', 'blur'],\n            },\n          ]"}],attrs:{placeholder:"栏目名称"}})],1),t("a-form-item",{attrs:{label:"上传封面:"}},[t("div",{staticClass:"ant-upload-preview",on:{click:function(a){return e.$refs.modal.edit(e.img)}}},[t("div",{staticClass:"mask"},[t("a-icon",{attrs:{type:"cloud-upload-o"}})],1),t("img",{attrs:{src:e.img}})])]),t("a-form-item",{attrs:{label:"栏目描述:"}},[t("a-textarea",{directives:[{name:"decorator",rawName:"v-decorator",value:["description"],expression:"['description']"}],attrs:{rows:4,placeholder:"栏目描述"}})],1)],1)],1),t("a-modal",{attrs:{title:"编辑栏目",visible:e.visible_edit,"confirm-loading":e.confirmLoading_edit},on:{ok:e.handleEditOk,cancel:e.handleEditCancel}},[t("a-form",{attrs:{form:e.edit_form,labelCol:{span:4},wrapperCol:{span:16}}},[t("a-form-item",{attrs:{label:"栏目id:"}},[t("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["channelId"],expression:"['channelId']"}],attrs:{disabled:"disabled"}})],1),t("a-form-item",{attrs:{label:"栏目名称:"}},[t("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["channelName",{rules:[{required:!0,message:"请输入名称"}],validateTrigger:["change","blur"]}],expression:"[\n            'channelName',\n            {\n              rules: [{ required: true, message: '请输入名称' }],\n              validateTrigger: ['change', 'blur'],\n            },\n          ]"}],attrs:{placeholder:"栏目名称"}})],1),t("a-form-item",{attrs:{label:"上传封面:"}},[t("div",{staticClass:"ant-upload-preview",on:{click:function(a){return e.$refs.modal.edit(e.img)}}},[t("div",{staticClass:"mask"},[t("a-icon",{attrs:{type:"cloud-upload-o"}})],1),t("img",{attrs:{src:e.img}})])]),t("a-form-item",{attrs:{label:"栏目描述:"}},[t("a-textarea",{directives:[{name:"decorator",rawName:"v-decorator",value:["channelDescription"],expression:"['channelDescription']"}],attrs:{rows:4,placeholder:"栏目描述"}})],1)],1)],1),t("avatar-modal",{ref:"modal",attrs:{CropWidth:200},on:{ok:e.setImg}})],1)},i=[],r=(t("a4d3"),t("e01a"),t("af20")),s=t("b775"),d=t("4302"),o=[{title:"#",dataIndex:"channelId",key:"id"},{title:"封面",dataIndex:"channelAvatar",key:"avatar",scopedSlots:{customRender:"avatar"},width:"15%"},{title:"名称",dataIndex:"channelName",key:"channelName"},{title:"描述",dataIndex:"channelDescription",key:"description"},{title:"操作",key:"action",scopedSlots:{customRender:"action"},width:"20%"}],c={data:function(){return this.add_form=this.$form.createForm(this),this.edit_form=this.$form.createForm(this),{loading:!1,management:"栏目管理",columns:o,data:null,visible_add:!1,confirmLoading_add:!1,visible_edit:!1,confirmLoading_edit:!1,img:""}},components:{pageHeader:r["a"],AvatarModal:d["a"]},mounted:function(){this.getList()},methods:{setImg:function(e){e?(this.$message.success("上传成功"),this.img=e):this.$message.error("出现未知错误！")},getList:function(){var e=this;this.loading=!0,Object(s["a"])({url:"/channel/list",method:"get"}).then((function(a){e.data=a.data.data,e.loading=!1}))},showAddModal:function(){this.img="/catagory.png",this.visible_add=!0},handleAddOk:function(){var e=this;this.add_form.validateFields((function(a,t){if(!a){e.confirmLoading_add=!0;var n={channelName:t.channelName,channelAvatar:e.img,channelDescription:t.description};Object(s["a"])({url:"/channel/save",method:"post",data:n}).then((function(a){a.data.data?(e.$message.success("添加成功"),e.confirmLoading_add=!1,e.visible_add=!1,e.add_form.setFieldsValue({channelName:"",description:""}),e.getList()):(e.$message.error("添加失败"),e.confirmLoading_add=!1,e.visible_add=!1)}))}}))},handleAddCancel:function(){this.visible_add=!1},showEditModal:function(e){var a=this;this.$nextTick((function(){setTimeout((function(){a.edit_form.setFieldsValue({channelId:e.channelId,channelName:e.channelName,channelDescription:e.channelDescription})}),100)})),this.img=e.channelAvatar,this.visible_edit=!0,this.edit_form.setFieldsValue()},handleEditCancel:function(){this.visible_edit=!1},handleEditOk:function(){var e=this;this.edit_form.validateFields((function(a,t){if(!a){e.confirmLoading_edit=!0;var n={channelId:t.channelId,channelName:t.channelName,channelAvatar:e.img,channelDescription:t.channelDescription};Object(s["a"])({url:"/channel/update",method:"post",data:n}).then((function(a){a.data.data?(e.$message.success("更新成功"),e.confirmLoading_edit=!1,e.visible_edit=!1,e.getList()):(e.$message.error("更新失败"),e.confirmLoading_edit=!1,e.visible_edit=!1)}))}}))},showDeleteConfirm:function(e){var a=this;this.$confirm({title:"确定删除该栏目?",okText:"Yes",okType:"danger",cancelText:"No",onOk:function(){Object(s["a"])({url:"/channel/delete",method:"post",data:{id:e.channelId}}).then((function(e){e.data.data?(a.$message.success("删除成功"),a.getList()):a.$message.error("删除失败")}))}})}}},l=c,m=(t("9c53"),t("2877")),h=Object(m["a"])(l,n,i,!1,null,"52a4cae6",null);a["default"]=h.exports}}]);
//# sourceMappingURL=chunk-666e3c51.d2ffb808.js.map